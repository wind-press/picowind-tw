<!-- lazily load the gLightbox CSS file -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css"></noscript>

<script>
    //picostrap gLightbox integration
    function pico_initialize_glightbox() {   
        //find elements that need to be 'lightboxed'
        let matches = document.querySelectorAll('#container-content-single a:not(.nolightbox) img:not(.nolightbox), #container-content-page a:not(.nolightbox) img:not(.nolightbox), .autolightbox a:not(.nolightbox) img:not(.nolightbox)');

        //iterate and add the class
        for (let i=0; i<matches.length; i++) {
            matches[i].parentElement.classList.add("glightbox");

            //if the parent link does not have an href, add the image src as href
            if (!matches[i].parentElement.getAttribute("href") && matches[i].getAttribute("src")) {
                matches[i].parentElement.setAttribute("href", matches[i].getAttribute("src"));
            }
        }

        //run the lightbox
        const lightbox = GLightbox({});
    }
</script>
<script onload="pico_initialize_glightbox()" src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>